:root{
    --bg: #0b0f14;
    --panel: #121821;
    --ink: #e7f0ff;
    --muted: #9fb3c8;
    --accent: #42d392;
    --accent-2: #8a7fff;
    --danger: #ff5757;
    --ok: #34d399;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius: 16px;
  }
  
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body{
    margin:0;
    background: radial-gradient(1200px 600px at 80% -10%, #1a2432 0%, #0b0f14 50%, #06080c 100%);
    color: var(--ink);
    font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
  }
  
  .topbar{
    padding: 28px 20px 8px;
    text-align:center;
  }
  h1{
    margin:0 0 6px;
    font-size: clamp(22px, 3.6vw, 34px);
    letter-spacing: .5px;
  }
  .subtitle{
    margin:0;
    color: var(--muted);
    font-size: 14px;
  }
  
  .container{
    max-width: 980px;
    margin: 20px auto 40px;
    padding: 0 16px;
  }
  
  .controls{
    background: var(--panel);
    border-radius: var(--radius);
    padding: 16px;
    box-shadow: var(--shadow);
    display: grid;
    gap: 12px;
  }
  
  .control-row{
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 12px;
  }
  .control-row .stretch{ grid-column: 1 / -2; }
  
  label{
    display:flex;
    flex-direction:column;
    gap:6px;
    color: var(--muted);
    font-size: 13px;
  }
  input{
    background:#0c131b;
    color: var(--ink);
    border: 1px solid #1c2633;
    border-radius: 10px;
    padding: 10px 12px;
    outline:none;
  }
  input:focus{ border-color:#2a3a52; box-shadow: 0 0 0 3px rgba(66, 211, 146, .15); }
  
  .btn{
    border: none;
    background: linear-gradient(180deg, #2cd59f, #0fb77c);
    color: #04130c;
    font-weight: 700;
    border-radius: 12px;
    padding: 10px 14px;
    cursor: pointer;
    box-shadow: 0 6px 16px rgba(19, 184, 123, .35);
    transition: transform .06s ease, filter .2s ease;
  }
  .btn:hover{ filter: brightness(1.05); }
  .btn:active{ transform: translateY(1px) scale(.99); }
  
  .btn-secondary{
    background: linear-gradient(180deg, #2a3342, #1f2836);
    color: var(--ink);
    box-shadow: 0 6px 16px rgba(0,0,0,.3);
  }
  .btn-accent{
    background: linear-gradient(180deg, var(--accent-2), #5f54ff);
    color: #06081a;
    box-shadow: 0 6px 16px rgba(124, 115, 255, .35);
  }
  
  .board-wrap{
    margin: 18px 0 12px;
  }
  .board{
    background: repeating-linear-gradient(-45deg, #0f1621, #0f1621 12px, #0e1420 12px, #0e1420 24px);
    border: 1px solid #1c2635;
    border-radius: var(--radius);
    min-height: 96px;
    padding: 16px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
    box-shadow: var(--shadow);
  }
  
  .cell{
    width: 60px;
    height: 60px;
    display:grid;
    place-items:center;
    background: #121a26;
    border: 1px solid #1e2a3d;
    border-radius: 14px;
    font-weight: 800;
    font-size: 22px;
    letter-spacing: .5px;
    position: relative;
    box-shadow: inset 0 0 0 1px #0e1521, 0 8px 18px rgba(0,0,0,.25);
  }
  
  /* Operation animations */
  .inserted{ animation: pop-in .28s ease-out; }
  @keyframes pop-in{
    0%{ transform: scale(.6); filter: brightness(1.6); }
    60%{ transform: scale(1.06); }
    100%{ transform: scale(1); }
  }
  
  .deleted{
    animation: fade-out .28s ease-in forwards;
    background: #1a0e12 !important;
    border-color: #3a1b26 !important;
    color: #ffbcbc !important;
  }
  @keyframes fade-out{
    to{ opacity: 0; transform: scale(.85); }
  }
  
  .match{
    animation: pulse 1.2s ease-in-out infinite;
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }
  @keyframes pulse{
    0%{ box-shadow: 0 0 0 0 rgba(66, 211, 146, .35); }
    70%{ box-shadow: 0 0 0 16px rgba(66, 211, 146, 0); }
    100%{ box-shadow: 0 0 0 0 rgba(66, 211, 146, 0); }
  }
  
  /* Feedback + effects */
  .feedback-wrap{ min-height: 32px; }
  .feedback{
    background: #0f1621;
    border: 1px solid #1c2635;
    color: var(--muted);
    border-radius: 12px;
    padding: 10px 12px;
    box-shadow: var(--shadow);
  }
  .feedback.ok{ color: var(--ok); }
  .feedback.warn{ color: #ffd166; }
  .feedback.bad{ color: var(--danger); }
  
  .shake{ animation: shake .32s linear; }
  @keyframes shake{
    0%,100%{ transform: translateX(0); }
    20%{ transform: translateX(-6px); }
    40%{ transform: translateX(6px); }
    60%{ transform: translateX(-4px); }
    80%{ transform: translateX(4px); }
  }
  
  /* Minimal success flare */
  .success-flare{
    position: relative;
  }
  .success-flare::after{
    content:"";
    position: absolute;
    inset:-8px;
    border-radius: 18px;
    pointer-events: none;
    animation: flare 1s ease-out;
    background:
      radial-gradient(200px 100px at 20% -20%, rgba(66,211,146,.22), transparent 70%),
      radial-gradient(200px 100px at 80% 120%, rgba(138,127,255,.22), transparent 70%);
  }
  @keyframes flare{
    0%{ opacity: 0; filter: blur(18px); }
    15%{ opacity: 1; }
    100%{ opacity: 0; filter: blur(30px); }
  }
  
  /* Responsive */
  @media (max-width: 720px){
    .control-row{
      grid-template-columns: 1fr 1fr;
    }
    .control-row .stretch{ grid-column: 1 / -1; }
    .cell{ width: 56px; height: 56px; }
  }  